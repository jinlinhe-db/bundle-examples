# Deployment target specific values
targets:
  research:
    resources:
      registered_models:
        model:
          comment: Registered model in Unity Catalog for the "mlops_stacks" ML Project for ${bundle.target} deployment target.

  dev:
    resources:
      registered_models:
        model:
          comment: Registered model in Unity Catalog for the "mlops_stacks" ML Project for ${bundle.target} deployment target.

# Defines model and experiments
resources:
  registered_models:
      model:
        name: ${var.model_name}
        catalog_name: ${var.catalog_name}
        schema_name: ${var.schema_name} 
        grants:
          - privileges:
              - EXECUTE
            principal: account users
          - privileges:
              - ALL_PRIVILEGES
            principal: SGIA_TEAM_RD_AI_Platform
        depends_on:
          - resources.jobs.model_training_job.id
          - resources.jobs.batch_inference_job.id

  experiments:
    experiment:
      name: ${var.experiment_name}
      permissions:
        - level: CAN_READ
          group_name: users
        - level: CAN_MANAGE
          group_name: SGIA_TEAM_RD_AI_Platform
      description: MLflow Experiment used to track runs for mlops_stacks project.
